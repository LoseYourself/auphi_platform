<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><%@ page import="com.auphi.ktrl.i18n.Messages" %><%@ page import="com.auphi.ktrl.system.user.util.*" %><%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %><%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %><%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %><%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %><%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %><%	String errMsg = request.getAttribute("errMsg")==null?"":request.getAttribute("errMsg").toString();%><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head>	<link rel="shortcut icon" href="images/platform.ico" />	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">	<link rel="stylesheet" type="text/css" href="common/ext4/resources/css/ext-all-gray.css">	<link rel="stylesheet" type="text/css" href="common/css/mystyle.css">	<link href="common/css/style.css" rel="stylesheet" type="text/css" />	<script type="text/javascript" src="common/jquery-1.9.1.min.js"></script>	<script type="text/javascript" src="common/bootstrap/js/bootstrap.min.js"></script>	<script type="text/javascript" src="common/ext4/ext-all.js"></script>	<link rel="stylesheet" type="text/css" href="common/bootstrap/css/bootstrap.min.css">	<link href="common/css/style.css" rel="stylesheet" type="text/css" />	<%--<script src="common/cloud.js" type="text/javascript"></script>--%>	<script language="javascript">		$(function(){			$('.loginbox').css({'position':'absolute','left':($(window).width()-692)/2});			$(window).resize(function(){				$('.loginbox').css({'position':'absolute','left':($(window).width()-692)/2});			})		});		Ext.onReady(function(){			var errMsg = '<%=errMsg %>';			if(errMsg != ''){				Ext.MessageBox.alert('<%=Messages.getString("Metadata.Message.Title.Error") %>',errMsg);			}			Ext.QuickTips.init();			Ext.form.Field.prototype.msgTarget='side';		});		$("#listForm").submit(function(e){			toLogin();			return false;		});	</script>	<script type="text/javascript">		function toLogin(){			$("#user_name").parent().removeClass("has-error has-feedback");			$("#password").parent().removeClass("has-error has-feedback");			$("#verifyCode").parent().removeClass("has-error has-feedback");			var username = $("#user_name").val() ;			var password = $("#password").val() ;			var verifyCode = $("#verifyCode").val();			var ok = true;			if(username == ''){				$("#user_name").parent().addClass("has-error has-feedback");				ok =  false;			}			if(password == '') {				$("#password").parent().addClass("has-error has-feedback");				ok =  false;			}			if(verifyCode == '') {				$("#verifyCode").parent().addClass("has-error has-feedback");				ok =  false;			}			if(ok){				Ext.Ajax.request({					url: 'login',					method: 'POST',					params: {						action: 'checkLogin',						user_name: username,						password: password,						verifyCode: verifyCode					},					success: function(transport) {						var res = transport.responseText;						if(res == '<%=UMStatus.SUCCESS.getStatusMessage() %>'){							document.forms[0].submit();						}else {							Ext.MessageBox.alert('<%=Messages.getString("Metadata.Message.Title.Error") %>',res);							return false;						}					}				});			}		}		function toReset(){			document.forms[0].reset();		}		function changeVerifyCode(){			var imgSrc = $("#imgObj");			var src = imgSrc.attr("src");			var timestamp = (new Date()).valueOf();			var url = "register?action=createVerifyCode&timestamp=" + timestamp;			imgSrc.attr("src",url);		}		function toRegister(){			//windowRegister.show();			window.location.href="register.do";		}	</script>	<title><%=Messages.getString("Default.Jsp.Title") %></title>	<style type="text/css">		<!--		body {			margin-left: 0px;			margin-top: 0px;			margin-right: 0px;			margin-bottom: 0px;			background-image: url(images/bg1.jpg);			font-size: 9px;		}		.style2 {			COLOR: #ffffff;			font-size: 12px;		}		-->	</style>	<script language="JavaScript" type="text/JavaScript">		function MM_swapImgRestore() { //v3.0			var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;		}		function MM_preloadImages() { //v3.0			var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();				var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)					if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}		}		function MM_findObj(n, d) { //v4.01			var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {				d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}			if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];			for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);			if(!x && d.getElementById) x=d.getElementById(n); return x;		}		function MM_swapImage() { //v3.0			var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)				if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}		}		function KeyDown(e)		{			if(e != null){				if (e.keyCode == 13) {					toLogin();				}			}		}	</script></head><body onkeydown='if(event.keyCode==13){subw.click()}' style="background-color:#1c77ac; background-image:url(images/login/light.png); background-repeat:no-repeat; background-position:center top; overflow:hidden;"><div id="mainBody">	<div id="cloud1" class="cloud"></div>	<div id="cloud2" class="cloud"></div></div><div class="logintop">	<span><spring:message code="Default.Jsp.Welcome.Login"/> </span>	<ul>		<!-- <li><a href="#">回首页</a></li>-->		<li role="presentation" class="dropdown">			<a id="drop6" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">				<spring:message code="Default.Jsp.Welcome.Language"/>			</a>			<ul id="menu3" class="dropdown-menu" aria-labelledby="drop6" style="width:20px;">				<li><a href="login.do?lang=zh">简体中文</a></li>				<li><a href="login.do?lang=en">English</a></li>			</ul>		</li>        <li><a href="#"><spring:message code="Default.Jsp.Welcome.Help"/> </a></li>		<li><a href="#"><spring:message code="Default.Jsp.Welcome.About"/> </a></li>	</ul></div><div class="loginbody">	<span class="systemlogo"></span>	<div class="loginbox">		<form id="listForm" name="listForm" action="login" method="post">			<input type="hidden" name="action" id="action" value="platformLogin">			<ul>				<li>					<div class="input-group ">						<input type="text" name="user_name" id="user_name" utocomplete="off" class="form-control" placeholder="<spring:message code="Login.Jsp.Warn.Empty.Username"/> " aria-describedby="basic-addon2" data-container="body" data-toggle="popover" data-placement="left" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">						<span class="input-group-addon">							<img src="images/login/hdd-login-username.png" width="16px" alt="">						</span>					</div>				</li>				<li>					<div class="input-group">						<input type="password" id="password" name="password" class="form-control" placeholder="<spring:message code="Login.Jsp.Warn.Empty.Password"/> " aria-describedby="basic-addon2">						<span class="input-group-addon">							<img src="images/login/hdd-login-password.png" width="16px" alt="">						</span>					</div>				</li>				<li>					<img class="captcha_img" onclick="javascript:changeVerifyCode();" id="imgObj" src="register?action=createVerifyCode" style=" "  />					<div class="input-group">						<input type="text" id="verifyCode" name="verifyCode" class="form-control" placeholder="请输入验证码">						<span class="input-group-addon" onclick="javascript:changeVerifyCode();">							<img id="verifyCodeImg"  src="images/login/hdd-login-flush.png" width="16px" alt="">						</span>					</div>				</li>				<li>					<button type="button" style="height: 40px" class="btn btn-primary btn-block" onclick="toLogin();"> <spring:message code="Login.Jsp.Dialog.Submit" /> </button>				</li>				<a href="javascript:toRegister();"><span style="color: #515151;font-size:13px" ><spring:message code="Default.Jsp.Welcome.Register"/> </span></a>			</ul>		</form>	</div></div><div class="loginbm">  <a href="http://www.doetl.com"><spring:message code="Default.Jsp.CopyRight"/> </a> </div></body></html></html>